{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jakee\\\\Documents\\\\shop-shop\\\\client\\\\src\\\\components\\\\Cart\\\\index.js\";\nimport React, { useEffect } from \"react\";\nimport CartItem from '../CartItem';\nimport Auth from '../../utils/auth';\nimport './style.css';\nimport { useStoreContext } from '../../utils/GlobalState';\nimport { TOGGLE_CART, ADD_MULTIPLE_TO_CART } from \"../../utils/actions\";\nimport { idbPromise } from \"../../utils/helpers\";\nconst Cart = () => {\n  const [state, dispatch] = useStoreContext();\n  function toggleCart() {\n    dispatch({\n      type: TOGGLE_CART\n    });\n  }\n  useEffect(() => {\n    async function getCart() {\n      const cart = await idbPromise('cart', 'get');\n      dispatch({\n        type: ADD_MULTIPLE_TO_CART,\n        products: [...cart]\n      });\n    }\n    ;\n    if (!state.cart.length) {\n      getCart();\n    }\n  }, [state.cart.length, dispatch]);\n  function calculateTotal() {\n    let sum = 0;\n    state.cart.forEach(item => {\n      sum += item.price * item.purchaseQuantity;\n    });\n    return sum.toFixed(2);\n  }\n  if (!state.cartOpen) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-closed\",\n      onClick: toggleCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      role: \"img\",\n      \"aria-label\": \"trash\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }\n    }, \"\\uD83D\\uDED2\"));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"close\",\n    onClick: toggleCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, \"[close]\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, \"Shopping Cart\"), state.cart.length ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, state.cart.map(item => /*#__PURE__*/React.createElement(CartItem, {\n    key: item._id,\n    item: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-row space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 25\n    }\n  }, \"Total: $\", calculateTotal()), Auth.loggedIn() ? /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  }, \"Checkout\") : /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 33\n    }\n  }, \"(log in to check out)\"))) : /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    role: \"img\",\n    \"aria-label\": \"shocked\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, \"\\uD83D\\uDE31\"), \"You haven't added anything to your cart yet!\"));\n};\nexport default Cart;","map":{"version":3,"names":["React","useEffect","CartItem","Auth","useStoreContext","TOGGLE_CART","ADD_MULTIPLE_TO_CART","idbPromise","Cart","state","dispatch","toggleCart","type","getCart","cart","products","length","calculateTotal","sum","forEach","item","price","purchaseQuantity","toFixed","cartOpen","createElement","className","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","role","map","key","_id","loggedIn"],"sources":["C:/Users/jakee/Documents/shop-shop/client/src/components/Cart/index.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport CartItem from '../CartItem';\nimport Auth from '../../utils/auth';\nimport './style.css';\n\nimport { useStoreContext } from '../../utils/GlobalState';\nimport { TOGGLE_CART, ADD_MULTIPLE_TO_CART } from \"../../utils/actions\";\n\n\n\nimport { idbPromise } from \"../../utils/helpers\";\n\nconst Cart = () => {\n\n    const [state, dispatch] = useStoreContext();\n\n    function toggleCart() {\n        dispatch({ type: TOGGLE_CART });\n    }\n    \n    useEffect(() => {\n        async function getCart() {\n          const cart = await idbPromise('cart', 'get');\n          dispatch({ type: ADD_MULTIPLE_TO_CART, products: [...cart] });\n        };\n      \n        if (!state.cart.length) {\n          getCart();\n        }\n      }, [state.cart.length, dispatch]);\n      \n    function calculateTotal() {\n        let sum = 0;\n        state.cart.forEach(item => {\n            sum += item.price * item.purchaseQuantity;\n        });\n        return sum.toFixed(2);\n    }\n\n    if (!state.cartOpen) {\n        return (\n            <div className=\"cart-closed\" onClick={toggleCart}>\n                <span\n                    role=\"img\"\n                    aria-label=\"trash\">ðŸ›’</span>\n            </div>\n        );\n    }\n\n\n    return (\n        <div className=\"cart\">\n            <div className=\"close\" onClick={toggleCart}>[close]</div>\n            <h2>Shopping Cart</h2>\n            {state.cart.length ? (\n                <div>\n                    {state.cart.map(item => (\n                        <CartItem key={item._id} item={item} />\n                    ))}\n                    <div className=\"flex-row space-between\">\n                        <strong>Total: ${calculateTotal()}</strong>\n                        {\n                            Auth.loggedIn() ?\n                                <button>\n                                    Checkout\n                                </button>\n                                :\n                                <span>(log in to check out)</span>\n                        }\n                    </div>\n                </div>\n            ) : (\n                <h3>\n                    <span role=\"img\" aria-label=\"shocked\">\n                        ðŸ˜±\n                    </span>\n                    You haven't added anything to your cart yet!\n                </h3>\n            )}\n        </div>\n    );\n};\n\nexport default Cart;"],"mappings":"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"},"metadata":{},"sourceType":"module"}